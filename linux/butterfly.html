<!doctype html public "-//w3c//dtd html 4.0 transitional//en">
<html>
<head>
   <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
   <meta name="Author" content="Eric Brombaugh">
   <meta name="GENERATOR" content="Mozilla/4.72 [en] (X11; U; Linux 2.2.14-5.0 i686) [Netscape]">
   <title>Linux Driver for the Butterfly Media Compact Flash Adapter </title>
   <link rel="icon" href="favicon.ico" type="image/x-icon">
   <link rel="shortcut icon" href="favicon.ico" type="image/x-icon"> 
</head>
<body>
<h2>Linux Driver for the Butterfly Media Compact Flash Adapter</h2>

<h3>Introduction</h3>

The <a href=http://www.butterflymedia.com/Products-CFReader.asp>
Butterfly Media Compact Flash Adapter</a> is an inexpensive USB to
Compact Flash adapter which is based on the
<a href=http://www.prolific.com.tw/pl2307.htm>
Prolific PL-2307B USB-ATAPI bridge controller</a>. To connect this
device to a Linux 2.4 system, I have adapted Enrico Bravin's usbide
BusLink 20 GB USB HD driver which is designed to interface with a similar
chip.

<p> Note: I've tried this out on a stock RedHat 7.2 kernel (2.4.7-10)
with good results, but a standard kernel 2.4.18 did _not_ work. There
have been some significant changes in the usb subsystem between 2.4.7
and 2.4.18, so Enrico's driver may need some updating.

<h3>Installation</h3>

To begin, get Enrico's version 1.2.1 usbide driver at

<a href=http://bravin.home.cern.ch/bravin/usbide/usbide.html>Enrico's Site</a>

<p>uncompress/untar it and apply this patch

<p>tar zxf usbide-1.2.1.tar.gz
<br>gzip -cd butterfly_patch-1.2.1.gz | patch -p0

<p>Then, follow Enrico's excellent installation instructions to compile
and install the driver.

<h3>Use</h3>

Once you've compiled and installed the driver, load the driver with some
variation of

<p>modprobe usbide

<p>and plug the adapter into the USB. Insert a CF card into the adapter.
Check the syslog and look for messages from the driver indicating
that it has detected the card. If all went well, you may create a
mount point for your card in the filesystem and mount the card. After
that, read and write the card as if it were an ordinary hard drive.
Before ejecting the card, unmount it.

<h3>Automounting</h3>

On my stock Redhat 7.2 systems, I've set up the hotplug system to
automatically mount the compact flash card when the usb subsystem sees it.
Just grab my <a href=usbide>usbide</a> script and put it in the /etc/hotplug/usb
directory. Then, add this line to /etc/fstab:

<p>/dev/pda1               /mnt/cf                 auto    noauto,owner 0 0

<p>and create the mountpoint /mnt/cf. The next time you insert a Compact Flash
card it should be mounted and ready to use.

<h3>Download</h3>
Get my patch here: <a href=butterfly_patch-1.2.1.gz>butterfly_patch-1.2.1.gz</a>

<p>Please let me know if this patch works for you.


<p><a href="linux.html">Return to Linux page.</a>
<h5>
<b>Last Updated</b></h5>
:2002-03-24
<h5>
<b>Comments to:</b></h5>
<a href="mailto:ebrombaugh1@cox.net">Eric Brombaugh</a>
<br>&nbsp;
</body>
</html>
